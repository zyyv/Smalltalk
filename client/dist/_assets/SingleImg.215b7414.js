import{a as t,v as e,d as a,R as n,f as r,U as o,i,Q as s,r as l,o as d,c as u,w as c,p,e as f,t as g}from"./index.a91396de.js";import{I as b}from"./AntdIcon.b0161574.js";import{I as m}from"./InboxOutlined.5942a56d.js";var y={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};function h(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var v=function(a,n){var r=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),n.forEach((function(e){h(t,e,a[e])}))}return t}({},a,n.attrs);return t(b,e(r,{icon:y}),null)};v.displayName="LoadingOutlined",v.inheritAttrs=!1;var O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};function j(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var w=function(a,n){var r=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),n.forEach((function(e){j(t,e,a[e])}))}return t}({},a,n.attrs);return t(b,e(r,{icon:O}),null)};function k(t){const e=r({action:"https:"===window.location.protocol?"https://upload-z2.qiniup.com":"http://upload-z2.qiniup.com",list:[],loading:!1,data:{token:"",key:""},domainUrl:""});return{...n(e),handleChange:({file:a,fileList:n})=>{"uploading"===a.status&&(e.loading=!0,e.list=n),"done"===a.status&&(e.loading=!1,e.list=n,t.emit("update:src",`${e.domainUrl}${e.data.key}`)),"error"===a.status&&(e.loading=!1)},beforeUpload:(t,a)=>{if(!("image/jpeg"===t.type||"image/png"===t.type))return o.error("You can only upload JPG file!"),!1;if(!(t.size/1024/1024<2))return o.error("Image must smaller than 2MB!"),!1;const n=`${+new Date}-${i(9999,1e3)}${function(t){let e="";const a=t.lastIndexOf(".");a>=0&&(e=t.substring(a));return e}(t.name)}`;return s("/qiniu/token").then(t=>{e.domainUrl=t.data.domainUrl,e.data.token=t.data.token,e.data.key=n}).catch(()=>{Promise.reject(!1)})}}}w.displayName="PlusOutlined",w.inheritAttrs=!1;var P=a({name:"Upload",components:{InboxOutlined:m,PlusOutlined:w,LoadingOutlined:v},props:{src:String,tips:{type:String,default:"Upload"}},setup:(t,e)=>({...k(e)})});const q=c("data-v-2b5add12");p("data-v-2b5add12");const U={key:1},x={class:"ant-upload-text"};f();const I=q((function(e,a,n,r,o,i){const s=l("loading-outlined"),c=l("plus-outlined"),p=l("a-upload");return d(),u(p,{fileList:e.list,"onUpdate:fileList":a[1]||(a[1]=t=>e.list=t),"list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,action:e.action,data:e.data,"before-upload":e.beforeUpload,onChange:e.handleChange},{default:q(()=>[e.src?(d(),u("div",{key:0,style:{"background-image":`url(${e.src})`},class:"avatar-bg"},null,4)):(d(),u("div",U,[e.loading?(d(),u(s,{key:0})):(d(),u(c,{key:1})),t("div",x,g(e.tips),1)]))]),_:1},8,["fileList","action","data","before-upload","onChange"])}));P.render=I,P.__scopeId="data-v-2b5add12";export{v as L,w as P,P as s};
